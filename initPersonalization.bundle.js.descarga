/*! Galaxy Helpers | Release v1.9.0 */
(window.webpackJsonpglxhprs=window.webpackJsonpglxhprs||[]).push([[1],{221:function(t,e,i){t.exports=i(224)},222:function(t,e,i){t.exports=i(234)},223:function(t,e,i){t.exports=i(228)},224:function(t,e,i){var n=i(225);t.exports=n},225:function(t,e,i){var n=i(15),r=i(226),s=Array.prototype;t.exports=function(t){var e=t.map;return t===s||n(s,t)&&e===s.map?r:e}},226:function(t,e,i){i(227);var n=i(27);t.exports=n("Array").map},227:function(t,e,i){"use strict";var n=i(0),r=i(80).map;n({target:"Array",proto:!0,forced:!i(83)("map")},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},228:function(t,e,i){var n=i(229);t.exports=n},229:function(t,e,i){var n=i(15),r=i(230),s=Array.prototype;t.exports=function(t){var e=t.reduce;return t===s||n(s,t)&&e===s.reduce?r:e}},230:function(t,e,i){i(231);var n=i(27);t.exports=n("Array").reduce},231:function(t,e,i){"use strict";var n=i(0),r=i(232).left,s=i(79),a=i(55),o=i(43);n({target:"Array",proto:!0,forced:!s("reduce")||!o&&a>79&&a<83},{reduce:function(t){var e=arguments.length;return r(this,t,e,e>1?arguments[1]:void 0)}})},232:function(t,e,i){var n=i(16),r=i(41),s=i(81),a=i(34),o=TypeError,c=function(t){return function(e,i,c,u){n(i);var h=r(e),l=s(h),f=a(h),d=t?f-1:0,g=t?-1:1;if(c<2)for(;;){if(d in l){u=l[d],d+=g;break}if(d+=g,t?d<0:f<=d)throw o("Reduce of empty array with no initial value")}for(;t?d>=0:f>d;d+=g)d in l&&(u=i(u,l[d],d,h));return u}};t.exports={left:c(!1),right:c(!0)}},234:function(t,e,i){var n=i(235);t.exports=n},235:function(t,e,i){var n=i(15),r=i(236),s=Array.prototype;t.exports=function(t){var e=t.some;return t===s||n(s,t)&&e===s.some?r:e}},236:function(t,e,i){i(237);var n=i(27);t.exports=n("Array").some},237:function(t,e,i){"use strict";var n=i(0),r=i(80).some;n({target:"Array",proto:!0,forced:!i(79)("some")},{some:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},239:function(t,e,i){t.exports=i(240)},240:function(t,e,i){var n=i(241);t.exports=n},241:function(t,e,i){var n=i(15),r=i(242),s=Array.prototype;t.exports=function(t){var e=t.every;return t===s||n(s,t)&&e===s.every?r:e}},242:function(t,e,i){i(243);var n=i(27);t.exports=n("Array").every},243:function(t,e,i){"use strict";var n=i(0),r=i(80).every;n({target:"Array",proto:!0,forced:!i(79)("every")},{every:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},244:function(t,e,i){t.exports=i(279)},245:function(t,e,i){var n=i(4),r=i(44),s=i(2),a=i(40),o=i(59),c=i(87),u=/MSIE .\./.test(a),h=n.Function,l=function(t){return u?function(e,i){var n=c(arguments.length,1)>2,a=s(e)?e:h(e),u=n?o(arguments,2):void 0;return t(n?function(){r(a,this,u)}:a,i)}:t};t.exports={setTimeout:l(n.setTimeout),setInterval:l(n.setInterval)}},246:function(t,e,i){t.exports=function(){"use strict";var t="millisecond",e="second",i="minute",n="hour",r="day",s="week",a="month",o="quarter",c="year",u=/^(\d{4})-?(\d{1,2})-?(\d{0,2})[^0-9]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?.?(\d{1,3})?$/,h=/\[([^\]]+)]|Y{2,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,l=function(t,e,i){var n=String(t);return!n||n.length>=e?t:""+Array(e+1-n.length).join(i)+t},f={s:l,z:function(t){var e=-t.utcOffset(),i=Math.abs(e),n=Math.floor(i/60),r=i%60;return(e<=0?"+":"-")+l(n,2,"0")+":"+l(r,2,"0")},m:function(t,e){var i=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(i,a),r=e-n<0,s=t.clone().add(i+(r?-1:1),a);return Number(-(i+(e-n)/(r?n-s:s-n))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(u){return{M:a,y:c,w:s,d:r,h:n,m:i,s:e,ms:t,Q:o}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},d={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},g="en",v={};v[g]=d;var y=function(t){return t instanceof D},p=function(t,e,i){var n;if(!t)return g;if("string"==typeof t)v[t]&&(n=t),e&&(v[t]=e,n=t);else{var r=t.name;v[r]=t,n=r}return i||(g=n),n},m=function(t,e,i){if(y(t))return t.clone();var n=e?"string"==typeof e?{format:e,pl:i}:e:{};return n.date=t,new D(n)},$=f;$.l=p,$.i=y,$.w=function(t,e){return m(t,{locale:e.$L,utc:e.$u,$offset:e.$offset})};var D=function(){function l(t){this.$L=this.$L||p(t.locale,null,!0),this.parse(t)}var f=l.prototype;return f.parse=function(t){this.$d=function(t){var e=t.date,i=t.utc;if(null===e)return new Date(NaN);if($.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var n=e.match(u);if(n)return i?new Date(Date.UTC(n[1],n[2]-1,n[3]||1,n[4]||0,n[5]||0,n[6]||0,n[7]||0)):new Date(n[1],n[2]-1,n[3]||1,n[4]||0,n[5]||0,n[6]||0,n[7]||0)}return new Date(e)}(t),this.init()},f.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},f.$utils=function(){return $},f.isValid=function(){return!("Invalid Date"===this.$d.toString())},f.isSame=function(t,e){var i=m(t);return this.startOf(e)<=i&&i<=this.endOf(e)},f.isAfter=function(t,e){return m(t)<this.startOf(e)},f.isBefore=function(t,e){return this.endOf(e)<m(t)},f.$g=function(t,e,i){return $.u(t)?this[e]:this.set(i,t)},f.year=function(t){return this.$g(t,"$y",c)},f.month=function(t){return this.$g(t,"$M",a)},f.day=function(t){return this.$g(t,"$W",r)},f.date=function(t){return this.$g(t,"$D","date")},f.hour=function(t){return this.$g(t,"$H",n)},f.minute=function(t){return this.$g(t,"$m",i)},f.second=function(t){return this.$g(t,"$s",e)},f.millisecond=function(e){return this.$g(e,"$ms",t)},f.unix=function(){return Math.floor(this.valueOf()/1e3)},f.valueOf=function(){return this.$d.getTime()},f.startOf=function(t,o){var u=this,h=!!$.u(o)||o,l=$.p(t),f=function(t,e){var i=$.w(u.$u?Date.UTC(u.$y,e,t):new Date(u.$y,e,t),u);return h?i:i.endOf(r)},d=function(t,e){return $.w(u.toDate()[t].apply(u.toDate(),(h?[0,0,0,0]:[23,59,59,999]).slice(e)),u)},g=this.$W,v=this.$M,y=this.$D,p="set"+(this.$u?"UTC":"");switch(l){case c:return h?f(1,0):f(31,11);case a:return h?f(1,v):f(0,v+1);case s:var m=this.$locale().weekStart||0,D=(g<m?g+7:g)-m;return f(h?y-D:y+(6-D),v);case r:case"date":return d(p+"Hours",0);case n:return d(p+"Minutes",1);case i:return d(p+"Seconds",2);case e:return d(p+"Milliseconds",3);default:return this.clone()}},f.endOf=function(t){return this.startOf(t,!1)},f.$set=function(s,o){var u,h=$.p(s),l="set"+(this.$u?"UTC":""),f=(u={},u.day=l+"Date",u.date=l+"Date",u[a]=l+"Month",u[c]=l+"FullYear",u[n]=l+"Hours",u[i]=l+"Minutes",u[e]=l+"Seconds",u[t]=l+"Milliseconds",u)[h],d=h===r?this.$D+(o-this.$W):o;if(h===a||h===c){var g=this.clone().set("date",1);g.$d[f](d),g.init(),this.$d=g.set("date",Math.min(this.$D,g.daysInMonth())).toDate()}else f&&this.$d[f](d);return this.init(),this},f.set=function(t,e){return this.clone().$set(t,e)},f.get=function(t){return this[$.p(t)]()},f.add=function(t,o){var u,h=this;t=Number(t);var l=$.p(o),f=function(e){var i=m(h);return $.w(i.date(i.date()+Math.round(e*t)),h)};if(l===a)return this.set(a,this.$M+t);if(l===c)return this.set(c,this.$y+t);if(l===r)return f(1);if(l===s)return f(7);var d=(u={},u[i]=6e4,u[n]=36e5,u[e]=1e3,u)[l]||1,g=this.$d.getTime()+t*d;return $.w(g,this)},f.subtract=function(t,e){return this.add(-1*t,e)},f.format=function(t){var e=this;if(!this.isValid())return"Invalid Date";var i=t||"YYYY-MM-DDTHH:mm:ssZ",n=$.z(this),r=this.$locale(),s=this.$H,a=this.$m,o=this.$M,c=r.weekdays,u=r.months,l=function(t,n,r,s){return t&&(t[n]||t(e,i))||r[n].substr(0,s)},f=function(t){return $.s(s%12||12,t,"0")},d=r.meridiem||function(t,e,i){var n=t<12?"AM":"PM";return i?n.toLowerCase():n},g={YY:String(this.$y).slice(-2),YYYY:this.$y,M:o+1,MM:$.s(o+1,2,"0"),MMM:l(r.monthsShort,o,u,3),MMMM:u[o]||u(this,i),D:this.$D,DD:$.s(this.$D,2,"0"),d:String(this.$W),dd:l(r.weekdaysMin,this.$W,c,2),ddd:l(r.weekdaysShort,this.$W,c,3),dddd:c[this.$W],H:String(s),HH:$.s(s,2,"0"),h:f(1),hh:f(2),a:d(s,a,!0),A:d(s,a,!1),m:String(a),mm:$.s(a,2,"0"),s:String(this.$s),ss:$.s(this.$s,2,"0"),SSS:$.s(this.$ms,3,"0"),Z:n};return i.replace(h,(function(t,e){return e||g[t]||n.replace(":","")}))},f.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},f.diff=function(t,r,u){var h,l=$.p(r),f=m(t),d=6e4*(f.utcOffset()-this.utcOffset()),g=this-f,v=$.m(this,f);return v=(h={},h[c]=v/12,h[a]=v,h[o]=v/3,h[s]=(g-d)/6048e5,h.day=(g-d)/864e5,h[n]=g/36e5,h[i]=g/6e4,h[e]=g/1e3,h)[l]||g,u?v:$.a(v)},f.daysInMonth=function(){return this.endOf(a).$D},f.$locale=function(){return v[this.$L]},f.locale=function(t,e){if(!t)return this.$L;var i=this.clone(),n=p(t,e,!0);return n&&(i.$L=n),i},f.clone=function(){return $.w(this.$d,this)},f.toDate=function(){return new Date(this.valueOf())},f.toJSON=function(){return this.isValid()?this.toISOString():null},f.toISOString=function(){return this.$d.toISOString()},f.toString=function(){return this.$d.toUTCString()},l}();return m.prototype=D.prototype,m.extend=function(t,e){return t(e,D,m),m},m.locale=p,m.isDayjs=y,m.unix=function(t){return m(1e3*t)},m.en=v[g],m.Ls=v,m}()},279:function(t,e,i){i(280);var n=i(11);t.exports=n.setTimeout},280:function(t,e,i){i(281),i(282)},281:function(t,e,i){var n=i(0),r=i(4),s=i(245).setInterval;n({global:!0,bind:!0,forced:r.setInterval!==s},{setInterval:s})},282:function(t,e,i){var n=i(0),r=i(4),s=i(245).setTimeout;n({global:!0,bind:!0,forced:r.setTimeout!==s},{setTimeout:s})},283:function(t,e,i){t.exports=function(){"use strict";return function(t,e,i){e.prototype.isBetween=function(t,e,n,r){var s=i(t),a=i(e),o="("===(r=r||"()")[0],c=")"===r[1];return(o?this.isAfter(s,n):!this.isBefore(s,n))&&(c?this.isBefore(a,n):!this.isAfter(a,n))||(o?this.isBefore(s,n):!this.isAfter(s,n))&&(c?this.isAfter(a,n):!this.isBefore(a,n))}}}()},284:function(t,e,i){t.exports=function(){"use strict";return function(t,e,i){var n=(new Date).getTimezoneOffset(),r=e.prototype;i.utc=function(t,i){return new e({date:t,utc:!0,format:i})},r.utc=function(){return i(this.toDate(),{locale:this.$L,utc:!0})},r.local=function(){return i(this.toDate(),{locale:this.$L,utc:!1})};var s=r.parse;r.parse=function(t){t.utc&&(this.$u=!0),this.$utils().u(t.$offset)||(this.$offset=t.$offset),s.call(this,t)};var a=r.init;r.init=function(){if(this.$u){var t=this.$d;this.$y=t.getUTCFullYear(),this.$M=t.getUTCMonth(),this.$D=t.getUTCDate(),this.$W=t.getUTCDay(),this.$H=t.getUTCHours(),this.$m=t.getUTCMinutes(),this.$s=t.getUTCSeconds(),this.$ms=t.getUTCMilliseconds()}else a.call(this)};var o=r.utcOffset;r.utcOffset=function(t){var e=this.$utils().u;if(e(t))return this.$u?0:e(this.$offset)?o.call(this):this.$offset;var i,r=Math.abs(t)<=16?60*t:t;return 0!==t?(i=this.local().add(r+n,"minute")).$offset=r:i=this.utc(),i};var c=r.format;r.format=function(t){var e=t||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return c.call(this,e)},r.valueOf=function(){var t=this.$utils().u(this.$offset)?0:this.$offset+n;return this.$d.valueOf()-6e4*t},r.isUTC=function(){return!!this.$u},r.toISOString=function(){return this.toDate().toISOString()},r.toString=function(){return this.toDate().toUTCString()}}}()},285:function(t,e,i){"use strict";i.r(e);var n=i(222),r=i.n(n),s=i(17),a=i.n(s),o=i(14),c=i.n(o),u=i(221),h=i.n(u),l=i(33),f=i.n(l),d=i(56),g=i.n(d),v=i(223),y=i.n(v),p=i(39),m=i.n(p),$=i(42),D=i(107);const w="galaxy-session-cookie-"+$.c,b=t=>`galaxy-campaign-${t}-${$.c}`,M=new Date((new Date).getTime()+18e5);var S=i(244),k=i.n(S),A=i(19),O=i.n(A),x=i(239),T=i.n(x),_=i(84),C=i.n(_),L=i(246),Y=i.n(L),U=i(283),H=i.n(U),I=i(86);Y.a.extend(H.a);var z=class{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;this.errorsList=[],this.trigger=t,this.visits=g()(this.trigger.visits,10)||0,this.devices=this.trigger.devices||[];const i=this.trigger.geo||{};this.countries=i.countries||[],this.continents=i.continents||[],this.coordinates=i.coordinates||[],this.queryString=this.trigger.query_string||"",this.ignore_utm=this.trigger.ignore_utm;const n=this.trigger.duration||{};this.timezone=this.trigger.timezone,this.startDate=!!n.date_start&&Y()(n.date_start),this.endDate=!!n.date_end&&Y()(n.date_end),this.nowDate=E({timezone:this.timezone}),this.hourStart=n.hour_start||"",this.hourEnd=n.hour_end||"",this.currentData=e,this.widgets=this.trigger.widgets||[]}async check(){return this.checkVisitsAvailibility()&&this.checkDevicesAvailibility()&&this.checkqueryStringAvailability()&&this.checkUTMAvailability()&&this.checkPeriodTimeAvailability()&&this.checkPeriodDateAvailability()&&await this.checkLocalisationAvailibility()&&await this.checkWidgetsAvailibility()}async checkWidgetsAvailibility(){if(this.widgets.length)try{return await(t=>{const e=[];return new a.a((i,n)=>{const r=y()(t).call(t,(t,i)=>{const n=i.function;return"function"==typeof window[n]?t.push(new a.a((t,r)=>{window[n](i.data,(function(n,s){!1!==n?t():(e.push(`Widget ${i.key} returned false`),s&&e.push(s),r(n))}))})):console.log("[perso] Cound not find function "+n),t},[]),s=a.a.all(r);a.a.race([new a.a((t,i)=>{k()(()=>{e.push("Widgets functions are taking more than 5s"),i()},5e3)}),s]).then(()=>{i()}).catch(t=>{t&&console.log(t),n(e)})})})(this.widgets),!0}catch(t){return O()(t)?this.errorsList.push(...t):void 0!==t&&!1!==t&&console.log(t),!1}return!0}checkVisitsAvailibility(){return!this.visits||this.currentData.campaignVisits>=this.visits}checkDevicesAvailibility(){var t;return!this.devices.length||c()(t=this.devices).call(t,this.currentData.device)>-1}checkPeriodDateAvailability(){return!(this.startDate&&this.endDate&&this.startDate.isValid()&&this.endDate.isValid())||this.nowDate.isBetween(this.startDate,this.endDate,"day","[]")}checkPeriodTimeAvailability(){return!this.hourStart||!this.hourEnd||F(this.nowDate.format("HH:mm"),[this.hourStart,this.hourEnd])}checkqueryStringAvailability(){if(!this.queryString)return!0;const t=this.queryString.split("&");return T()(t).call(t,t=>{var e;return c()(e=this.currentData.urlParameters).call(e,t)>-1})}checkUTMAvailability(){var t,e;return!this.ignore_utm||(null===(t=this.currentData.urlParameters)||void 0===t||!t.length||!r()(e=this.currentData.urlParameters).call(e,t=>{var e;return c()(e=t.split("=")[0].toLowerCase()).call(e,"utm")>-1}))}async checkLocalisationAvailibility(){if(!this.continents.length&&!this.countries.length&&!this.coordinates.length)return!0;if(B(this.continents,this.currentData.continent)||B(this.countries,this.currentData.country))return!0;if(this.coordinates.length){const t=await async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;const i={status:!0,errorsList:[]};if(t.length<1)return i;const n=C()(t).call(t,t=>!t.country_code||t.country_code===e);if(n.length<1){i.status=!1;const n=h()(t).call(t,t=>t.country_code).join(", ");return i.errorsList.push(`User is in ${e} and coordinates are in another country (${n})`),i}try{const t=await Object(I.b)();i.status=r()(n).call(n,e=>{const n=Object($.b)(e.lat,e.lng,t.latitude,t.longitude),r=n<=e.radius;return r||i.errorsList.push(`Geolocation - Distance with "${e.name}" (${e.lat}, ${e.lng}) is ${Math.ceil(n)} and should be equal or below ${e.radius}`),r}),i.status||i.errorsList.push(`User location is ${t.latitude}, ${t.longitude}`)}catch(t){i.status=!1,i.errorsList.push("Geolocation - Could not obtain user location"),console.error(t)}return i}(this.coordinates,this.currentData.country);if(!0===t.status)return!0;this.errorsList.push(t.errorsList.join(" & "))}return!1}error(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const i=t=>{var e,i;let n;switch(t){case"visits":n=`will only appear after ${this.visits} visits [${this.currentData.campaignVisits}]`;break;case"devices":n=`will only on ${this.devices} devices [${this.currentData.device}]`;break;case"period":n=`is only available between ${Y()(this.startDate).format("MMM DD YYYY")} and ${Y()(this.endDate).format("MMM DD YYYY")} [${this.nowDate.format("MMM DD YYYY")}] (timezone: ${this.timezone})`;break;case"hours":n=`is only available between ${this.hourStart} and ${this.hourEnd} [${this.nowDate.format("HH:mm")}] (timezone: ${this.timezone})`;break;case"localisation":n=`will only appear for (${this.continents} continents -> [${this.currentData.continent}]), (${this.countries} countries -> [${this.currentData.country}])`;break;case"queryString":n="Missing parameter(s) in the URL: "+C()(e=this.queryString.split("&")).call(e,t=>{var e;return c()(e=this.currentData.urlParameters).call(e,t)<0}).join(" & ");break;case"utm":n="UTM parameter(s) in the URL: "+C()(i=this.currentData.urlParameters).call(i,t=>{var e;return c()(e=t.split("=")[0].toLowerCase()).call(e,"utm")>-1});break;default:n="Sorry, an error occured"}return n};if(e=e.toUpperCase(),!this.checkVisitsAvailibility()){const t=i("visits");V(e+" ->",t)}if(!this.checkDevicesAvailibility()){const t=i("devices");V(e+" ->",t)}if(!this.checkPeriodDateAvailability()){const t=i("period");V(e+" ->",t)}if(!this.checkPeriodTimeAvailability()){const t=i("hours");V(e+" ->",t)}if(!this.checkqueryStringAvailability()){const t=i("queryString");V(e+" ->",t)}if(!this.checkUTMAvailability()){const t=i("utm");V(e+" ->",t)}if(!this.checkLocalisationAvailibility()){const t=i("localisation");V(e+" ->",t)}h()(t=this.errorsList).call(t,t=>V(t))}};var P=class{constructor(t){this.campaign=t,this.name=t.name,this.id=t.id,this.html=t.html,this.trigger=t.trigger,this.cookieName=b(this.id)}get alreadyDisplayed(){return"displayed"===m.a.get(this.cookieName)}get numberOfVisits(){return this.alreadyDisplayed?"COOKIE_DISPLAYED":m.a.get(this.cookieName)||0}callbackDisplay(){const t=this.trigger.max_repeat;let e;"30days"===t?(e=30,V(`Campaign "${this.name}" (id:${this.id}) saved as "displayed" for 30d`)):"session"===t&&(e=M,V(`Campaign "${this.name}" (id:${this.id}) saved as "displayed" for the session`)),e?m.a.set(this.cookieName,"displayed",{expires:e}):(m.a.remove(this.cookieName),V(`Campaign "${this.name}" (id:${this.id}) - cookie reset (repeat always)`))}async check(t){if(!t)return V("currentData not present"),!1;if(this.alreadyDisplayed)return V(`Campaign "${this.name}" (id:${this.id}) has already been displayed`),!1;const e=new z(this.trigger,{...t,campaignVisits:this.numberOfVisits}),i=await e.check();return i?V(`Campaign "${this.name}" (id:${this.id}) matches all rules`):V()&&(console.group("[ personalization ] ",`Campaign "${this.name}" (id:${this.id}) not displayed because:`),e.error(),console.groupEnd()),i}waitForDelay(){return new a.a(t=>{if("exit"===this.campaign.trigger.delay){const e=()=>{document.body.removeEventListener("mouseleave",e),t(this)};document.body.addEventListener("mouseleave",e)}else{const e=g()(this.campaign.trigger.delay,10)||0;k()(()=>{t(this)},1e3*e)}})}},N=i(284),W=i.n(N);Y.a.extend(W.a);const j={},V=Object($.a)({prefix:["%c[ personalization ] ","font-weight: bold;"],key:"PERSO",options:j});async function q(t){let e={};t.geoData&&(e=await Object(D.b)());return{device:Object(D.a)(),urlParameters:Object(D.c)(),country:e.country_code||"",continent:e.continent_code||"",city:e.city||""}}const E=t=>{let{date:e,timezone:i}=t,n=e?Y()(e):Y()();return"number"==typeof i&&(n=n.utcOffset(i)),n},F=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const i=e[0],n=e[1];return i<n?t>=i&&t<=n:t>=i||t<=n},B=function(){var t;let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return c()(t=h()(e).call(e,t=>t.toUpperCase())).call(t,i.toUpperCase())>-1},J=t=>{const e=!m.a.get(w);m.a.set(w,!0,{expires:M}),f()(t).call(t,t=>{let i=b(t.id),n=m.a.get(i),r=1;if("displayed"!==n){if(n){let t=g()(n,10);isNaN(t)||(r+=t)}("pageview"===t.visits_type||"session"===t.visits_type&&e)&&m.a.set(i,r,{expires:30})}})},Z=(t,e)=>new a.a((i,n)=>{const r=new P(t);r.check(e).then(t=>{t?i(r):n()})}),R=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;return new a.a(i=>{y()(t).call(t,(t,i)=>t.then(t=>t).catch(()=>Z(i,e)),a.a.reject([])).then(t=>{i(t)}).catch(t=>{void 0!==t&&console.log(t),i()})})},G=window.GalaxyPersonalization||{},K=G.pageCampaigns||[],Q=G.allActiveCampaigns||[];e.default=async function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"object"==typeof t&&t.debug&&(j.force=!0);const e=[];if(J(Q),K.length)try{const t=r()(K).call(K,t=>{try{if(t.trigger.geo.continents.length>0||t.trigger.geo.countries.length>0||t.trigger.geo.coordinates.length>0)return!0}catch(t){console.error(t)}return!1}),i=await q({geoData:t}),n=await R(K,i);n?e.push(new a.a(t=>{n.waitForDelay().then(()=>t(n))})):V("Not any campaign to display")}catch(t){console.log(t)}else G.forceMessage&&"string"==typeof G.forceMessage?(V("Force preview of message"),e.push(new a.a(t=>{t({html:G.forceMessage,callbackDisplay(){}})}))):V("Not any campaign on this page");return e}}}]);